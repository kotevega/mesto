(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var n,r;return n=t,(r=[{key:"getInitialCardsApi",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"postNewCardApi",value:function(t,e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:e})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"getUserInfoFromApi",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"patchUserInfoToApi",value:function(t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"patchUserAvatarToApi",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"deleteCardFromApi",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"putCardLikeToApi",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"deleteCardLikeFromApi",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e){var n=e.data,r=e.userId,o=e.templateSelector,i=e.handleClickDeleteButton,u=e.handleCardClick,a=e.handleLikeButtonClick,c=e.handleLikeDelete;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataCard=n,this._name=n.name,this._imageLink=n.link,this._idCard=n._id,this._likes=n.likes,this._ownerId=n.owner._id,this._userId=r,this._selector=o,this._handleClickDeleteButton=i,this._handleCardClick=u,this._handleLikeButton=a,this._handleLikeDelete=c}var e,n;return e=t,(n=[{key:"_getElement",value:function(){return document.querySelector(this._selector).content.querySelector(".element__list").cloneNode(!0)}},{key:"createCard",value:function(){return this._element=this._getElement(),this._elementCaption=this._element.querySelector(".element__caption"),this._elementImage=this._element.querySelector(".element__image"),this._likeCardButton=this._element.querySelector(".element__like-button"),this._buttonDeleteCard=this._element.querySelector(".element__delete-button"),this._popupOpenImage=this._element.querySelector(".element__button-image"),this._elementLikeCounter=this._element.querySelector(".element__counter"),this._elementCaption.textContent=this._name,this._elementImage.src=this._imageLink,this._elementImage.alt=this._name,this._ownerId!==this._userId&&this._buttonDeleteCard.remove(),this.countLikes(this._dataCard),this._setEventListeners(),this._element}},{key:"_handleLikeButtonClick",value:function(t){this._checkLikes()?this._handleLikeDelete(t):this._handleLikeButton(t)}},{key:"_setEventListeners",value:function(){var t=this;this._likeCardButton.addEventListener("click",(function(){return t._handleLikeButtonClick(t._idCard)})),this._popupOpenImage.addEventListener("click",(function(){return t._handleCardClick(t._name,t._imageLink)})),this._buttonDeleteCard.addEventListener("click",(function(){return t._handleClickDeleteButton(t._idCard,t._element)}))}},{key:"_checkLikes",value:function(){var t=this;return this._likes.some((function(e){return e._id===t._userId}))}},{key:"switchButtonLike",value:function(){this._likeCardButton.classList.toggle("element__like-button_active")}},{key:"countLikes",value:function(t){this._likes=t.likes,0===this._likes.length?this._elementLikeCounter.textContent="0":this._elementLikeCounter.textContent=this._likes.length}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var c=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t,e){var n=this;t.reverse().forEach((function(t){return n._renderer(t,e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameSelector=document.querySelector(n),this._jobSelector=document.querySelector(r),this._avatarSelector=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return this._userData={},this._userData.name=this._nameSelector.textContent,this._userData.about=this._jobSelector.textContent,this._userData}},{key:"setUserInfo",value:function(t){t.name&&(this._nameSelector.textContent=null==t?void 0:t.name),t.about&&(this._jobSelector.textContent=null==t?void 0:t.about)}},{key:"setUserAvatar",value:function(t){t.avatar&&(this._avatarSelector.src=null==t?void 0:t.avatar)}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}var m=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.code&&i.close()},(r=h(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popupSelector=e,this._popup=document.querySelector(this._popupSelector),this._buttonSubmit=this._popup.querySelector(".popup__submit-button")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"renderLoader",value:function(t,e){t?(this.defaulText=this._buttonSubmit.textContent,this._buttonSubmit.textContent=e):this._buttonSubmit.textContent=this.defaulText}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close(),e.target.classList.contains("popup__close-button")&&t.close()}))}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._handleFormSubmit=r,e._form=e._popup.querySelector(".popup__form"),e}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._popup.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;v(S(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues()),t.close()}))}},{key:"close",value:function(){v(S(u.prototype),"close",this).call(this),this._form.reset()}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(o){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._heading=e._popup.querySelector(".popup__heading"),e}return e=u,(n=[{key:"open",value:function(t,e){j(C(u.prototype),"open",this).call(this),this._image.src=e,this._image.alt=t,this._heading.textContent=t}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},T.apply(this,arguments)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(r);if(o){var n=B(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._handleFormSubmit=r,e._buttonSubmit=e._popup.querySelector(".popup__submit-button"),e}return e=u,(n=[{key:"open",value:function(t,e){T(B(u.prototype),"open",this).call(this),this.id=t,this.card=e}},{key:"setEventListeners",value:function(){var t=this;T(B(u.prototype),"setEventListeners",this).call(this),this._buttonSubmit.addEventListener("click",(function(e){e.preventDefault(),t._handleFormSubmit(t.id,t.card)}))}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===q(o)?o:String(o)),r)}var o}var U=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._form=e,this._inputElement=n.inputElement,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass,this._inputVisibleError=n.inputVisibleError,this._inactiveButtonClass=n.inactiveButtonClass,this._inputList=Array.from(this._form.querySelectorAll(n.inputElement)),this._submitButton=this._form.querySelector(n.submitButtonSelector)}var e,n;return e=t,(n=[{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_showInputError",value:function(t){this._errorTextElement=this._form.querySelector("".concat(this._inputErrorClass).concat(t.name)),this._errorTextElement.textContent=t.validationMessage,this._errorTextElement.classList.add(this._errorClass),t.classList.add(this._inputVisibleError)}},{key:"_hideInputError",value:function(t){this._errorTextElement=this._form.querySelector("".concat(this._inputErrorClass).concat(t.name)),this._errorTextElement.textContent="",this._errorTextElement.classList.remove(this._errorClass),t.classList.remove(this._inputVisibleError)}},{key:"_enableButton",value:function(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}},{key:"disableButton",value:function(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputList).some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():this._enableButton()}},{key:"_setEventListener",value:function(){var t=this;this._inputList.forEach((function(e){t._toggleButtonState(),e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),R={inputElement:".popup__input",inputErrorClass:".popup__input-error_type_",errorClass:"popup__input-error",inputVisibleError:"popup__input_visible-error",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled"};function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V,F=document.forms.popup_form_user,N=document.forms.popup_form_avatar,J=document.forms.popup_form_place,z=document.querySelector(".profile__edit-button"),G=document.querySelector(".profile__edit_avatar"),H=document.querySelector(".profile__add-button"),M=document.querySelector("#popup-name"),$=document.querySelector("#popup-about"),K=new U(N,R),Q=new U(J,R),W=new U(F,R),X=new n({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"efafdb7e-dc8f-4c7a-ad89-5ae9b99df990","Content-Type":"application/json"}});K.enableValidation(),W.enableValidation(),Q.enableValidation(),Promise.all([X.getUserInfoFromApi(),X.getInitialCardsApi()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];V=o._id,tt.setUserInfo(o),tt.setUserAvatar(o),Y.renderItems(i,V)})).catch((function(t){return console.log("Ошибка: ".concat(t))}));var Y=new c({renderer:function(t,e){Y.addItem(Z(t,e))}},".element"),Z=function(t,e){var n=new i({data:t,userId:e,templateSelector:".element-template",handleClickDeleteButton:function(t,e){ot.open(t,e)},handleCardClick:function(t,e){it.open(t,e)},handleLikeButtonClick:function(t){X.putCardLikeToApi(t).then((function(t){n.countLikes(t),n.switchButtonLike(t)})).catch((function(t){return console.log("Ошибка: ".concat(t))}))},handleLikeDelete:function(t){X.deleteCardLikeFromApi(t).then((function(t){n.countLikes(t),n.switchButtonLike(t)})).catch((function(t){return console.log("Ошибка: ".concat(t))}))}});return n.createCard()},tt=new f({nameSelector:".profile__name",jobSelector:".profile__occupation",avatarSelector:".profile__avatar"}),et=new g({popupSelector:".popup_type-avatar",handleFormSubmit:function(t){et.renderLoader(!0,"Сохранение..."),X.patchUserAvatarToApi(t).then((function(t){tt.setUserAvatar(t)})).catch((function(t){return console.log("Ошибка: ".concat(t))})).finally((function(){et.renderLoader(!1)}))}});G.addEventListener("click",(function(){et.open(),K.resetValidation(),K.disableButton()}));var nt=new g({popupSelector:".popup_type-user",handleFormSubmit:function(t){nt.renderLoader(!0,"Сохранение..."),X.patchUserInfoToApi(t).then((function(t){return tt.setUserInfo(t)})).catch((function(t){return console.log("Ошибка: ".concat(t))})).finally((function(){nt.renderLoader(!1)}))}});z.addEventListener("click",(function(){nt.open(),M.value=tt.getUserInfo().name,$.value=tt.getUserInfo().about,W.resetValidation(),W.disableButton()}));var rt=new g({popupSelector:".popup_type-place",handleFormSubmit:function(t){rt.renderLoader(!0,"Сохранение..."),X.postNewCardApi(t.imageName,t.imageLink).then((function(t){Y.addItem(Z(t,V))})).catch((function(t){return console.log("Ошибка: ".concat(t))})).finally((function(){rt.renderLoader(!1)}))}});H.addEventListener("click",(function(){rt.open(),Q.resetValidation(),Q.disableButton()}));var ot=new A({popupSelector:".popup_type-accept",handleFormSubmit:function(t,e){ot.renderLoader(!0,"Сохранение..."),X.deleteCardFromApi(t).then((function(){e.remove(),e=null,ot.close()})).catch((function(t){return console.log("Ошибка: ".concat(t))})).finally((function(){ot.renderLoader(!1)}))}}),it=new L(".popup_type-zoom");et.setEventListeners(),nt.setEventListeners(),it.setEventListeners(),rt.setEventListeners(),ot.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoic3JCQUFPLElBQU1BLEVBQUcsV0FDZCxTQUFBQSxFQUFZQyxJLDRGQUFTQyxDQUFBLEtBQUFGLEdBQ25CRyxLQUFLQyxTQUFXSCxFQUFRSSxRQUN4QkYsS0FBS0csU0FBV0wsRUFBUU0sT0FDMUIsQyxRQXdHQyxPLEVBeEdBUCxHLEVBQUEsRUFBQVEsSUFBQSxxQkFBQUMsTUFFRCxXQUNFLE9BQU9DLE1BQU0sR0FBREMsT0FBSVIsS0FBS0MsU0FBUSxVQUFVLENBQ3JDUSxPQUFRLE1BQ1JMLFFBQVNKLEtBQUtHLFdBQ2JPLE1BQUssU0FBQ0MsR0FDUCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFPLFdBQURQLE9BQVlHLEVBQUlLLFFBQ3ZDLEdBQ0YsR0FBQyxDQUFBWCxJQUFBLGlCQUFBQyxNQUVELFNBQWVXLEVBQU1DLEdBQ25CLE9BQU9YLE1BQU0sR0FBREMsT0FBSVIsS0FBS0MsU0FBUSxVQUFVLENBQ3JDUSxPQUFRLE9BQ1JMLFFBQVNKLEtBQUtHLFNBQ2RnQixLQUFNQyxLQUFLQyxVQUFVLENBQUVKLEtBQUFBLEVBQU1DLEtBQUFBLE1BQzVCUixNQUFLLFNBQUNDLEdBQ1AsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBTyxXQUFEUCxPQUFZRyxFQUFJSyxRQUN2QyxHQUNGLEdBQUMsQ0FBQVgsSUFBQSxxQkFBQUMsTUFFRCxXQUNFLE9BQU9DLE1BQU0sR0FBREMsT0FBSVIsS0FBS0MsU0FBUSxhQUFhLENBQ3hDUSxPQUFRLE1BQ1JMLFFBQVNKLEtBQUtHLFdBQ2JPLE1BQUssU0FBQ0MsR0FDUCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFPLFdBQURQLE9BQVlHLEVBQUlLLFFBQ3ZDLEdBQ0YsR0FBQyxDQUFBWCxJQUFBLHFCQUFBQyxNQUVELFNBQW1CZ0IsR0FDakIsT0FBT2YsTUFBTSxHQUFEQyxPQUFJUixLQUFLQyxTQUFRLGFBQWEsQ0FDeENRLE9BQVEsUUFDUkwsUUFBU0osS0FBS0csU0FDZGdCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJKLEtBQU1LLEVBQUtMLEtBQ1hNLE1BQU9ELEVBQUtDLFVBRWJiLE1BQUssU0FBQ0MsR0FDUCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFPLFdBQURQLE9BQVlHLEVBQUlLLFFBQ3ZDLEdBQ0YsR0FBQyxDQUFBWCxJQUFBLHVCQUFBQyxNQUVELFNBQXFCZ0IsR0FDbkIsT0FBT2YsTUFBTSxHQUFEQyxPQUFJUixLQUFLQyxTQUFRLG9CQUFvQixDQUMvQ1EsT0FBUSxRQUNSTCxRQUFTSixLQUFLRyxTQUNkZ0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQkcsT0FBUUYsRUFBS0UsV0FFZGQsTUFBSyxTQUFDQyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQU8sV0FBRFAsT0FBWUcsRUFBSUssUUFDdkMsR0FDRixHQUFDLENBQUFYLElBQUEsb0JBQUFDLE1BRUQsU0FBa0JtQixHQUNoQixPQUFPbEIsTUFBTSxHQUFEQyxPQUFJUixLQUFLQyxTQUFRLFdBQUFPLE9BQVVpQixHQUFVLENBQy9DaEIsT0FBUSxTQUNSTCxRQUFTSixLQUFLRyxXQUNiTyxNQUFLLFNBQUNDLEdBQ1AsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBTyxXQUFEUCxPQUFZRyxFQUFJSyxRQUN2QyxHQUNGLEdBQUMsQ0FBQVgsSUFBQSxtQkFBQUMsTUFFRCxTQUFpQm1CLEdBQ2YsT0FBT2xCLE1BQU0sR0FBREMsT0FBSVIsS0FBS0MsU0FBUSxXQUFBTyxPQUFVaUIsRUFBTSxVQUFVLENBQ3JEaEIsT0FBUSxNQUNSTCxRQUFTSixLQUFLRyxXQUNiTyxNQUFLLFNBQUNDLEdBQ1AsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBTyxXQUFEUCxPQUFZRyxFQUFJSyxRQUN2QyxHQUNGLEdBQUMsQ0FBQVgsSUFBQSx3QkFBQUMsTUFFRCxTQUFzQm1CLEdBQ3BCLE9BQU9sQixNQUFNLEdBQURDLE9BQUlSLEtBQUtDLFNBQVEsV0FBQU8sT0FBVWlCLEVBQU0sVUFBVSxDQUNyRGhCLE9BQVEsU0FDUkwsUUFBU0osS0FBS0csV0FDYk8sTUFBSyxTQUFDQyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQU8sV0FBRFAsT0FBWUcsRUFBSUssUUFDdkMsR0FDRixNLG9FQUFDbkIsQ0FBQSxDQTVHYSxHLG1xQkNBVCxJQUFNNkIsRUFBSSxXQUNmLFNBQUFBLEVBQUFDLEdBUUcsSUFQREwsRUFBSUssRUFBSkwsS0FDQU0sRUFBTUQsRUFBTkMsT0FDQUMsRUFBZ0JGLEVBQWhCRSxpQkFDQUMsRUFBdUJILEVBQXZCRyx3QkFDQUMsRUFBZUosRUFBZkksZ0JBQ0FDLEVBQXFCTCxFQUFyQkssc0JBQ0FDLEVBQWdCTixFQUFoQk0sa0IsNEZBQWdCbEMsQ0FBQSxLQUFBMkIsR0FFaEIxQixLQUFLa0MsVUFBWVosRUFDakJ0QixLQUFLbUMsTUFBUWIsRUFBS0wsS0FDbEJqQixLQUFLb0MsV0FBYWQsRUFBS0osS0FDdkJsQixLQUFLcUMsUUFBVWYsRUFBS2dCLElBQ3BCdEMsS0FBS3VDLE9BQVNqQixFQUFLa0IsTUFDbkJ4QyxLQUFLeUMsU0FBV25CLEVBQUtvQixNQUFNSixJQUMzQnRDLEtBQUsyQyxRQUFVZixFQUNmNUIsS0FBSzRDLFVBQVlmLEVBQ2pCN0IsS0FBSzZDLHlCQUEyQmYsRUFDaEM5QixLQUFLOEMsaUJBQW1CZixFQUN4Qi9CLEtBQUsrQyxrQkFBb0JmLEVBQ3pCaEMsS0FBS2dELGtCQUFvQmYsQ0FDM0IsQyxRQXVFQyxPLEVBdkVBUCxHLEVBQUEsRUFBQXJCLElBQUEsY0FBQUMsTUFFRCxXQUtFLE9BSm1CMkMsU0FDaEJDLGNBQWNsRCxLQUFLNEMsV0FDbkJPLFFBQVFELGNBQWMsa0JBQ3RCRSxXQUFVLEVBRWYsR0FBQyxDQUFBL0MsSUFBQSxhQUFBQyxNQUVELFdBdUJFLE9BdEJBTixLQUFLcUQsU0FBV3JELEtBQUtzRCxjQUNyQnRELEtBQUt1RCxnQkFBa0J2RCxLQUFLcUQsU0FBU0gsY0FBYyxxQkFDbkRsRCxLQUFLd0QsY0FBZ0J4RCxLQUFLcUQsU0FBU0gsY0FBYyxtQkFDakRsRCxLQUFLeUQsZ0JBQWtCekQsS0FBS3FELFNBQVNILGNBQWMseUJBQ25EbEQsS0FBSzBELGtCQUFvQjFELEtBQUtxRCxTQUFTSCxjQUNyQywyQkFFRmxELEtBQUsyRCxnQkFBa0IzRCxLQUFLcUQsU0FBU0gsY0FDbkMsMEJBRUZsRCxLQUFLNEQsb0JBQXNCNUQsS0FBS3FELFNBQVNILGNBQWMscUJBQ3ZEbEQsS0FBS3VELGdCQUFnQk0sWUFBYzdELEtBQUttQyxNQUN4Q25DLEtBQUt3RCxjQUFjTSxJQUFNOUQsS0FBS29DLFdBQzlCcEMsS0FBS3dELGNBQWNPLElBQU0vRCxLQUFLbUMsTUFFMUJuQyxLQUFLeUMsV0FBYXpDLEtBQUsyQyxTQUN6QjNDLEtBQUswRCxrQkFBa0JNLFNBR3pCaEUsS0FBS2lFLFdBQVdqRSxLQUFLa0MsV0FDckJsQyxLQUFLa0UscUJBRUVsRSxLQUFLcUQsUUFDZCxHQUFDLENBQUFoRCxJQUFBLHlCQUFBQyxNQUVELFNBQXVCNkQsR0FDakJuRSxLQUFLb0UsY0FDUHBFLEtBQUtnRCxrQkFBa0JtQixHQUV2Qm5FLEtBQUsrQyxrQkFBa0JvQixFQUUzQixHQUFDLENBQUE5RCxJQUFBLHFCQUFBQyxNQUVELFdBQXFCLElBQUErRCxFQUFBLEtBQ25CckUsS0FBS3lELGdCQUFnQmEsaUJBQWlCLFNBQVMsa0JBQzdDRCxFQUFLRSx1QkFBdUJGLEVBQUtoQyxRQUFRLElBRTNDckMsS0FBSzJELGdCQUFnQlcsaUJBQWlCLFNBQVMsa0JBQzdDRCxFQUFLdkIsaUJBQWlCdUIsRUFBS2xDLE1BQU9rQyxFQUFLakMsV0FBVyxJQUVwRHBDLEtBQUswRCxrQkFBa0JZLGlCQUFpQixTQUFTLGtCQUMvQ0QsRUFBS3hCLHlCQUF5QndCLEVBQUtoQyxRQUFTZ0MsRUFBS2hCLFNBQVMsR0FFOUQsR0FBQyxDQUFBaEQsSUFBQSxjQUFBQyxNQUVELFdBQWMsSUFBQWtFLEVBQUEsS0FDWixPQUFPeEUsS0FBS3VDLE9BQU9rQyxNQUFLLFNBQUNDLEdBQUksT0FBS0EsRUFBS3BDLE1BQVFrQyxFQUFLN0IsT0FBTyxHQUM3RCxHQUFDLENBQUF0QyxJQUFBLG1CQUFBQyxNQUVELFdBQ0VOLEtBQUt5RCxnQkFBZ0JrQixVQUFVQyxPQUFPLDhCQUN4QyxHQUFDLENBQUF2RSxJQUFBLGFBQUFDLE1BRUQsU0FBV3VFLEdBQ1Q3RSxLQUFLdUMsT0FBU3NDLEVBQVNyQyxNQUNJLElBQXZCeEMsS0FBS3VDLE9BQU91QyxPQUNkOUUsS0FBSzRELG9CQUFvQkMsWUFBYyxJQUV2QzdELEtBQUs0RCxvQkFBb0JDLFlBQWM3RCxLQUFLdUMsT0FBT3VDLE1BRXZELE0sb0VBQUNwRCxDQUFBLENBN0ZjLEcsbXFCQ0FWLElBQU1xRCxFQUFPLFdBQ2xCLFNBQUFBLEVBQUFwRCxFQUEwQnFELEdBQWMsSUFBMUJDLEVBQVF0RCxFQUFSc0QsVSw0RkFBUWxGLENBQUEsS0FBQWdGLEdBQ3BCL0UsS0FBS2tGLFVBQVlELEVBQ2pCakYsS0FBS21GLFdBQWFsQyxTQUFTQyxjQUFjOEIsRUFDM0MsQyxRQVFDLE8sRUFSQUQsRyxFQUFBLEVBQUExRSxJQUFBLGNBQUFDLE1BRUQsU0FBWWdCLEVBQU04RCxHQUFNLElBQUFmLEVBQUEsS0FDdEIvQyxFQUFLK0QsVUFBVUMsU0FBUSxTQUFDWixHQUFJLE9BQUtMLEVBQUthLFVBQVVSLEVBQU1VLEVBQUssR0FDN0QsR0FBQyxDQUFBL0UsSUFBQSxVQUFBQyxNQUVELFNBQVFpRixHQUNOdkYsS0FBS21GLFdBQVdLLFFBQVFELEVBQzFCLE0sb0VBQUNSLENBQUEsQ0FaaUIsRyxtcUJDQWIsSUFBTVUsRUFBUSxXQUNuQixTQUFBQSxFQUFBOUQsR0FBMkQsSUFBN0MrRCxFQUFZL0QsRUFBWitELGFBQWNDLEVBQVdoRSxFQUFYZ0UsWUFBYUMsRUFBY2pFLEVBQWRpRSxnQiw0RkFBYzdGLENBQUEsS0FBQTBGLEdBQ3JEekYsS0FBSzZGLGNBQWdCNUMsU0FBU0MsY0FBY3dDLEdBQzVDMUYsS0FBSzhGLGFBQWU3QyxTQUFTQyxjQUFjeUMsR0FDM0MzRixLQUFLK0YsZ0JBQWtCOUMsU0FBU0MsY0FBYzBDLEVBQ2hELEMsUUFzQkMsTyxFQXRCQUgsRyxFQUFBLEVBQUFwRixJQUFBLGNBQUFDLE1BRUQsV0FJRSxPQUhBTixLQUFLZ0csVUFBWSxDQUFDLEVBQ2xCaEcsS0FBS2dHLFVBQVUvRSxLQUFPakIsS0FBSzZGLGNBQWNoQyxZQUN6QzdELEtBQUtnRyxVQUFVekUsTUFBUXZCLEtBQUs4RixhQUFhakMsWUFDbEM3RCxLQUFLZ0csU0FDZCxHQUFDLENBQUEzRixJQUFBLGNBQUFDLE1BRUQsU0FBWTJGLEdBQ05BLEVBQVNoRixPQUNYakIsS0FBSzZGLGNBQWNoQyxZQUFjb0MsYUFBUSxFQUFSQSxFQUFVaEYsTUFFekNnRixFQUFTMUUsUUFDWHZCLEtBQUs4RixhQUFhakMsWUFBY29DLGFBQVEsRUFBUkEsRUFBVTFFLE1BRTlDLEdBQUMsQ0FBQWxCLElBQUEsZ0JBQUFDLE1BRUQsU0FBYzJGLEdBQ1JBLEVBQVN6RSxTQUNYeEIsS0FBSytGLGdCQUFnQmpDLElBQU1tQyxhQUFRLEVBQVJBLEVBQVV6RSxPQUV6QyxNLG9FQUFDaUUsQ0FBQSxDQTNCa0IsRyxrckJDQWQsSUFBTVMsRUFBSyxXQUNoQixTQUFBQSxFQUFZQyxHQUFlLEksTUFBQTlCLEVBQUEsTSw0RkFBQXRFLENBQUEsS0FBQW1HLEcsRUFBQSxLLEVBZ0JULFNBQUNFLEdBQ0EsV0FBYkEsRUFBSUMsTUFDTmhDLEVBQUtpQyxPQUVULEcsTUFwQjJCLHNCLHdGQUN6QnRHLEtBQUt1RyxlQUFpQkosRUFDdEJuRyxLQUFLd0csT0FBU3ZELFNBQVNDLGNBQWNsRCxLQUFLdUcsZ0JBQzFDdkcsS0FBS3lHLGNBQWdCekcsS0FBS3dHLE9BQU90RCxjQUFjLHdCQUNqRCxDLFFBcUNDLE8sRUFyQ0FnRCxHLEVBQUEsRUFBQTdGLElBQUEsT0FBQUMsTUFFRCxXQUNFTixLQUFLd0csT0FBTzdCLFVBQVUrQixJQUFJLGdCQUMxQnpELFNBQVNxQixpQkFBaUIsVUFBV3RFLEtBQUsyRyxnQkFDNUMsR0FBQyxDQUFBdEcsSUFBQSxRQUFBQyxNQUVELFdBQ0VOLEtBQUt3RyxPQUFPN0IsVUFBVVgsT0FBTyxnQkFDN0JmLFNBQVMyRCxvQkFBb0IsVUFBVzVHLEtBQUsyRyxnQkFDL0MsR0FBQyxDQUFBdEcsSUFBQSxlQUFBQyxNQVFELFNBQWF1RyxFQUFTQyxHQUNoQkQsR0FDRjdHLEtBQUsrRyxXQUFhL0csS0FBS3lHLGNBQWM1QyxZQUNyQzdELEtBQUt5RyxjQUFjNUMsWUFBY2lELEdBR2pDOUcsS0FBS3lHLGNBQWM1QyxZQUFjN0QsS0FBSytHLFVBRTFDLEdBQUMsQ0FBQTFHLElBQUEsb0JBQUFDLE1BRUQsV0FBb0IsSUFBQWtFLEVBQUEsS0FDbEJ4RSxLQUFLd0csT0FBT2xDLGlCQUFpQixhQUFhLFNBQUM4QixHQUNyQ0EsRUFBSVksT0FBT3JDLFVBQVVzQyxTQUFTLGlCQUNoQ3pDLEVBQUs4QixRQUVIRixFQUFJWSxPQUFPckMsVUFBVXNDLFNBQVMsd0JBQ2hDekMsRUFBSzhCLE9BRVQsR0FDRixNLG9FQUFDSixDQUFBLENBMUNlLEcsZ3ZDQ0VYLElBQU1nQixFQUFhLFNBQUFDLEkscVJBQUFDLENBQUFGLEVBQUFDLEdBQUEsSSxRQUFBRSxHLEVBQUFILEUscXJCQUN4QixTQUFBQSxFQUFBdkYsR0FBaUQsSUFBQTBDLEVBQW5DOEIsRUFBYXhFLEVBQWJ3RSxjQUFlbUIsRUFBZ0IzRixFQUFoQjJGLGlCQUc0QixPLDRGQUhadkgsQ0FBQSxLQUFBbUgsSUFDM0M3QyxFQUFBZ0QsRUFBQUUsS0FBQSxLQUFNcEIsSUFDRHFCLGtCQUFvQkYsRUFDekJqRCxFQUFLb0QsTUFBUXBELEVBQUttQyxPQUFPdEQsY0FBYyxnQkFBZ0JtQixDQUN6RCxDQXdCQyxPLEVBeEJBNkMsRyxFQUFBLEVBQUE3RyxJQUFBLGtCQUFBQyxNQUVELFdBQWtCLElBQUFrRSxFQUFBLEtBTWhCLE9BTEF4RSxLQUFLMEgsV0FBYTFILEtBQUt3RyxPQUFPbUIsaUJBQWlCLGlCQUMvQzNILEtBQUs0SCxZQUFjLENBQUMsRUFDcEI1SCxLQUFLMEgsV0FBV3BDLFNBQVEsU0FBQ3VDLEdBQ3ZCckQsRUFBS29ELFlBQVlDLEVBQU01RyxNQUFRNEcsRUFBTXZILEtBQ3ZDLElBQ09OLEtBQUs0SCxXQUNkLEdBQUMsQ0FBQXZILElBQUEsb0JBQUFDLE1BRUQsV0FBb0IsSUFBQXdILEVBQUEsS0FDbEJDLEVBQUFDLEVBQUFkLEVBQUFlLFdBQUEsMEJBQUFWLEtBQUEsTUFFQXZILEtBQUt5SCxNQUFNbkQsaUJBQWlCLFVBQVUsU0FBQzhCLEdBQ3JDQSxFQUFJOEIsaUJBQ0pKLEVBQUtOLGtCQUFrQk0sRUFBS0ssbUJBQzVCTCxFQUFLeEIsT0FDUCxHQUNGLEdBQUMsQ0FBQWpHLElBQUEsUUFBQUMsTUFFRCxXQUNFeUgsRUFBQUMsRUFBQWQsRUFBQWUsV0FBQSxjQUFBVixLQUFBLE1BQ0F2SCxLQUFLeUgsTUFBTVcsT0FDYixNLG9FQUFDbEIsQ0FBQSxDQTdCdUIsQ0FBU2hCLEcsZ3ZDQ0E1QixJQUFNbUMsRUFBYyxTQUFBbEIsSSxxUkFBQUMsQ0FBQWlCLEVBQUFsQixHQUFBLEksUUFBQUUsRyxFQUFBZ0IsRSxxckJBQ3pCLFNBQUFBLEVBQVlsQyxHQUFlLElBQUE5QixFQUdvQyxPLDRGQUhwQ3RFLENBQUEsS0FBQXNJLElBQ3pCaEUsRUFBQWdELEVBQUFFLEtBQUEsS0FBTXBCLElBQ0RtQyxPQUFTakUsRUFBS21DLE9BQU90RCxjQUFjLGlCQUN4Q21CLEVBQUtrRSxTQUFXbEUsRUFBS21DLE9BQU90RCxjQUFjLG1CQUFtQm1CLENBQy9ELENBT0MsTyxFQVBBZ0UsRyxFQUFBLEVBQUFoSSxJQUFBLE9BQUFDLE1BRUQsU0FBS1csRUFBTUMsR0FDVDZHLEVBQUFDLEVBQUFLLEVBQUFKLFdBQUEsYUFBQVYsS0FBQSxNQUNBdkgsS0FBS3NJLE9BQU94RSxJQUFNNUMsRUFDbEJsQixLQUFLc0ksT0FBT3ZFLElBQU05QyxFQUNsQmpCLEtBQUt1SSxTQUFTMUUsWUFBYzVDLENBQzlCLE0sb0VBQUNvSCxDQUFBLENBWndCLENBQVNuQyxHLGd2Q0NBN0IsSUFBTXNDLEVBQXFCLFNBQUFyQixJLHFSQUFBQyxDQUFBb0IsRUFBQXJCLEdBQUEsSSxRQUFBRSxHLEVBQUFtQixFLHFyQkFDaEMsU0FBQUEsRUFBQTdHLEdBQWlELElBQUEwQyxFQUFuQzhCLEVBQWF4RSxFQUFid0UsY0FBZW1CLEVBQWdCM0YsRUFBaEIyRixpQkFHNkMsTyw0RkFIN0J2SCxDQUFBLEtBQUF5SSxJQUMzQ25FLEVBQUFnRCxFQUFBRSxLQUFBLEtBQU1wQixJQUNEcUIsa0JBQW9CRixFQUN6QmpELEVBQUtvQyxjQUFnQnBDLEVBQUttQyxPQUFPdEQsY0FBYyx5QkFBeUJtQixDQUMxRSxDQWNDLE8sRUFkQW1FLEcsRUFBQSxFQUFBbkksSUFBQSxPQUFBQyxNQUVELFNBQUttSSxFQUFRdEUsR0FDWDRELEVBQUFDLEVBQUFRLEVBQUFQLFdBQUEsYUFBQVYsS0FBQSxNQUNBdkgsS0FBSzBJLEdBQUtELEVBQ1Z6SSxLQUFLbUUsS0FBT0EsQ0FDZCxHQUFDLENBQUE5RCxJQUFBLG9CQUFBQyxNQUVELFdBQW9CLElBQUFrRSxFQUFBLEtBQ2xCdUQsRUFBQUMsRUFBQVEsRUFBQVAsV0FBQSwwQkFBQVYsS0FBQSxNQUNBdkgsS0FBS3lHLGNBQWNuQyxpQkFBaUIsU0FBUyxTQUFDOEIsR0FDNUNBLEVBQUk4QixpQkFDSjFELEVBQUtnRCxrQkFBa0JoRCxFQUFLa0UsR0FBSWxFLEVBQUtMLEtBQ3ZDLEdBQ0YsTSxvRUFBQ3FFLENBQUEsQ0FuQitCLENBQVN0QyxHLG1xQkNGcEMsSUFBTXlDLEVBQWEsV0FDeEIsU0FBQUEsRUFBWUMsRUFBTUMsSSw0RkFBUTlJLENBQUEsS0FBQTRJLEdBQ3hCM0ksS0FBS3lILE1BQVFtQixFQUNiNUksS0FBSzhJLGNBQWdCRCxFQUFPRSxhQUM1Qi9JLEtBQUtnSixpQkFBbUJILEVBQU9JLGdCQUMvQmpKLEtBQUtrSixZQUFjTCxFQUFPTSxXQUMxQm5KLEtBQUtvSixtQkFBcUJQLEVBQU9RLGtCQUNqQ3JKLEtBQUtzSixxQkFBdUJULEVBQU9VLG9CQUNuQ3ZKLEtBQUswSCxXQUFhOEIsTUFBTUMsS0FBS3pKLEtBQUt5SCxNQUFNRSxpQkFBaUJrQixFQUFPRSxlQUNoRS9JLEtBQUswSixjQUFnQjFKLEtBQUt5SCxNQUFNdkUsY0FBYzJGLEVBQU9jLHFCQUN2RCxDLFFBc0VDLE8sRUF0RUFoQixHLEVBQUEsRUFBQXRJLElBQUEsa0JBQUFDLE1BRUQsV0FBa0IsSUFBQStELEVBQUEsS0FDaEJyRSxLQUFLMEgsV0FBV3BDLFNBQVEsU0FBQ3VDLEdBQ3ZCeEQsRUFBS3VGLGdCQUFnQi9CLEVBQ3ZCLEdBQ0YsR0FBQyxDQUFBeEgsSUFBQSxrQkFBQUMsTUFFRCxTQUFnQnVILEdBQ2Q3SCxLQUFLNkosa0JBQW9CN0osS0FBS3lILE1BQU12RSxjQUFjLEdBQUQxQyxPQUM1Q1IsS0FBS2dKLGtCQUFnQnhJLE9BQUdxSCxFQUFNNUcsT0FFbkNqQixLQUFLNkosa0JBQWtCaEcsWUFBY2dFLEVBQU1pQyxrQkFDM0M5SixLQUFLNkosa0JBQWtCbEYsVUFBVStCLElBQUkxRyxLQUFLa0osYUFDMUNyQixFQUFNbEQsVUFBVStCLElBQUkxRyxLQUFLb0osbUJBQzNCLEdBQUMsQ0FBQS9JLElBQUEsa0JBQUFDLE1BRUQsU0FBZ0J1SCxHQUNkN0gsS0FBSzZKLGtCQUFvQjdKLEtBQUt5SCxNQUFNdkUsY0FBYyxHQUFEMUMsT0FDNUNSLEtBQUtnSixrQkFBZ0J4SSxPQUFHcUgsRUFBTTVHLE9BRW5DakIsS0FBSzZKLGtCQUFrQmhHLFlBQWMsR0FDckM3RCxLQUFLNkosa0JBQWtCbEYsVUFBVVgsT0FBT2hFLEtBQUtrSixhQUM3Q3JCLEVBQU1sRCxVQUFVWCxPQUFPaEUsS0FBS29KLG1CQUM5QixHQUFDLENBQUEvSSxJQUFBLGdCQUFBQyxNQUVELFdBQ0VOLEtBQUswSixjQUFjL0UsVUFBVVgsT0FBT2hFLEtBQUtzSixzQkFDekN0SixLQUFLMEosY0FBY0ssVUFBVyxDQUNoQyxHQUFDLENBQUExSixJQUFBLGdCQUFBQyxNQUVELFdBQ0VOLEtBQUswSixjQUFjL0UsVUFBVStCLElBQUkxRyxLQUFLc0osc0JBQ3RDdEosS0FBSzBKLGNBQWNLLFVBQVcsQ0FDaEMsR0FBQyxDQUFBMUosSUFBQSxzQkFBQUMsTUFFRCxTQUFvQnVILEdBQ2JBLEVBQU1tQyxTQUFTQyxNQUdsQmpLLEtBQUs0SixnQkFBZ0IvQixHQUZyQjdILEtBQUtrSyxnQkFBZ0JyQyxFQUl6QixHQUFDLENBQUF4SCxJQUFBLG1CQUFBQyxNQUVELFdBQ0UsT0FBT2tKLE1BQU1DLEtBQUt6SixLQUFLMEgsWUFBWWpELE1BQ2pDLFNBQUNzRSxHQUFZLE9BQU1BLEVBQWFpQixTQUFTQyxLQUFLLEdBRWxELEdBQUMsQ0FBQTVKLElBQUEscUJBQUFDLE1BRUQsV0FDT04sS0FBS21LLG1CQUdSbkssS0FBS29LLGdCQUZMcEssS0FBS3FLLGVBSVQsR0FBQyxDQUFBaEssSUFBQSxvQkFBQUMsTUFFRCxXQUFvQixJQUFBa0UsRUFBQSxLQUNsQnhFLEtBQUswSCxXQUFXcEMsU0FBUSxTQUFDdUMsR0FDdkJyRCxFQUFLOEYscUJBQ0x6QyxFQUFNdkQsaUJBQWlCLFNBQVMsV0FDOUJFLEVBQUsrRixvQkFBb0IxQyxHQUN6QnJELEVBQUs4RixvQkFDUCxHQUNGLEdBQ0YsR0FBQyxDQUFBakssSUFBQSxtQkFBQUMsTUFFRCxXQUNFTixLQUFLd0ssbUJBQ1AsTSxvRUFBQzdCLENBQUEsQ0FoRnVCLEdDQWJFLEVBQVMsQ0FDcEJFLGFBQWMsZ0JBQ2RFLGdCQUFpQiw0QkFDakJFLFdBQVkscUJBQ1pFLGtCQUFtQiw2QkFDbkJNLHFCQUFzQix3QkFDdEJKLG9CQUFxQixpQywwR0NLdkIsSUFjSWtCLEVBZEVDLEVBQWtCekgsU0FBUzBILE1BQXVCLGdCQUNsREMsRUFBYTNILFNBQVMwSCxNQUF5QixrQkFDL0NFLEVBQVk1SCxTQUFTMEgsTUFBd0IsaUJBRTdDRyxFQUFvQjdILFNBQVNDLGNBQWMseUJBQzNDNkgsRUFBbUI5SCxTQUFTQyxjQUFjLHlCQUMxQzhILEVBQWtCL0gsU0FBU0MsY0FBYyx3QkFFekMrSCxFQUFpQmhJLFNBQVNDLGNBQWMsZUFDeENnSSxFQUFnQmpJLFNBQVNDLGNBQWMsZ0JBRXZDaUksRUFBdUIsSUFBSXhDLEVBQWNpQyxFQUFZL0IsR0FDckR1QyxFQUFzQixJQUFJekMsRUFBY2tDLEVBQVdoQyxHQUNuRHdDLEVBQXdCLElBQUkxQyxFQUFjK0IsRUFBaUI3QixHQUczRHlDLEVBQU0sSUFBSXpMLEVBQUksQ0FDbEJLLFFBQVMsOENBQ1RFLFFBQVMsQ0FDUG1MLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSXBCSixFQUFxQkssbUJBQ3JCSCxFQUFzQkcsbUJBQ3RCSixFQUFvQkksbUJBRXBCMUssUUFBUTJLLElBQUksQ0FBQ0gsRUFBSUkscUJBQXNCSixFQUFJSyx1QkFDeENqTCxNQUFLLFNBQUFpQixHQUFrQyxJLElBQUFpSyxHLEVBQUEsRSw0Q0FBQWpLLEksbzJCQUFoQ2tLLEVBQVlELEVBQUEsR0FBRUUsRUFBWUYsRUFBQSxHQUNoQ25CLEVBQVlvQixFQUFhdkosSUFDekJ5SixHQUFTQyxZQUFZSCxHQUNyQkUsR0FBU0UsY0FBY0osR0FDdkJLLEVBQVFDLFlBQVlMLEVBQWNyQixFQUNwQyxJQUNDMkIsT0FBTSxTQUFDQyxHQUFHLE9BQUtDLFFBQVFDLElBQUksV0FBRC9MLE9BQVk2TCxHQUFNLElBRS9DLElBQU1ILEVBQVUsSUFBSW5ILEVBQ2xCLENBQ0VFLFNBQVUsU0FBQ3VILEVBQU81SyxHQUNoQnNLLEVBQVFPLFFBQVFDLEVBQVdGLEVBQU81SyxHQUNwQyxHQUVGLFlBR0k4SyxFQUFhLFNBQUNwTCxFQUFNOEQsR0FDeEIsSUFBTXVILEVBQVUsSUFBSWpMLEVBQUssQ0FDdkJKLEtBQU1BLEVBQ05NLE9BQVF3RCxFQUNSdkQsaUJBQWtCLG9CQUVsQkMsd0JBQXlCLFNBQUM0RyxFQUFJdkUsR0FDNUJ5SSxHQUFrQkMsS0FBS25FLEVBQUl2RSxFQUM3QixFQUVBcEMsZ0JBQWlCLFNBQUNkLEVBQU1DLEdBQ3RCNEwsR0FBV0QsS0FBSzVMLEVBQU1DLEVBQ3hCLEVBRUFjLHNCQUF1QixTQUFDUCxHQUN0QjZKLEVBQ0d5QixpQkFBaUJ0TCxHQUNqQmYsTUFBSyxTQUFDQyxHQUNMZ00sRUFBUTFJLFdBQVd0RCxHQUNuQmdNLEVBQVFLLGlCQUFpQnJNLEVBQzNCLElBQ0N5TCxPQUFNLFNBQUNDLEdBQUcsT0FBS0MsUUFBUUMsSUFBSSxXQUFEL0wsT0FBWTZMLEdBQU0sR0FDakQsRUFFQXBLLGlCQUFrQixTQUFDUixHQUNqQjZKLEVBQ0cyQixzQkFBc0J4TCxHQUN0QmYsTUFBSyxTQUFDQyxHQUNMZ00sRUFBUTFJLFdBQVd0RCxHQUNuQmdNLEVBQVFLLGlCQUFpQnJNLEVBQzNCLElBQ0N5TCxPQUFNLFNBQUNDLEdBQUcsT0FBS0MsUUFBUUMsSUFBSSxXQUFEL0wsT0FBWTZMLEdBQU0sR0FDakQsSUFFRixPQUFPTSxFQUFRTyxZQUNqQixFQUVNbkIsR0FBVyxJQUFJdEcsRUFBUyxDQUM1QkMsYUFBYyxpQkFDZEMsWUFBYSx1QkFDYkMsZUFBZ0IscUJBR1p1SCxHQUFjLElBQUlqRyxFQUFjLENBQ3BDZixjQUFlLHFCQUNmbUIsaUJBQWtCLFNBQUNoRyxHQUNqQjZMLEdBQVlDLGNBQWEsRUFBTSxpQkFDL0I5QixFQUNHK0IscUJBQXFCL0wsR0FDckJaLE1BQUssU0FBQzRNLEdBQ0x2QixHQUFTRSxjQUFjcUIsRUFDekIsSUFDQ2xCLE9BQU0sU0FBQ0MsR0FBRyxPQUFLQyxRQUFRQyxJQUFJLFdBQUQvTCxPQUFZNkwsR0FBTSxJQUM1Q2tCLFNBQVEsV0FDUEosR0FBWUMsY0FBYSxFQUMzQixHQUNKLElBR0ZyQyxFQUFpQnpHLGlCQUFpQixTQUFTLFdBQ3pDNkksR0FBWU4sT0FDWjFCLEVBQXFCcUMsa0JBQ3JCckMsRUFBcUJmLGVBQ3ZCLElBRUEsSUFBTXFELEdBQWUsSUFBSXZHLEVBQWMsQ0FDckNmLGNBQWUsbUJBQ2ZtQixpQkFBa0IsU0FBQ3JCLEdBQ2pCd0gsR0FBYUwsY0FBYSxFQUFNLGlCQUNoQzlCLEVBQ0dvQyxtQkFBbUJ6SCxHQUNuQnZGLE1BQUssU0FBQ0MsR0FBRyxPQUFLb0wsR0FBU0MsWUFBWXJMLEVBQUksSUFDdkN5TCxPQUFNLFNBQUNDLEdBQUcsT0FBS0MsUUFBUUMsSUFBSSxXQUFEL0wsT0FBWTZMLEdBQU0sSUFDNUNrQixTQUFRLFdBQ1BFLEdBQWFMLGNBQWEsRUFDNUIsR0FDSixJQUdGdEMsRUFBa0J4RyxpQkFBaUIsU0FBUyxXQUMxQ21KLEdBQWFaLE9BQ2I1QixFQUFlM0ssTUFBUXlMLEdBQVM0QixjQUFjMU0sS0FDOUNpSyxFQUFjNUssTUFBUXlMLEdBQVM0QixjQUFjcE0sTUFDN0M4SixFQUFzQm1DLGtCQUN0Qm5DLEVBQXNCakIsZUFDeEIsSUFFQSxJQUFNd0QsR0FBYSxJQUFJMUcsRUFBYyxDQUNuQ2YsY0FBZSxvQkFDZm1CLGlCQUFrQixTQUFDckIsR0FDakIySCxHQUFXUixjQUFhLEVBQU0saUJBQzlCOUIsRUFDR3VDLGVBQWU1SCxFQUFTNkgsVUFBVzdILEVBQVM4SCxXQUM1Q3JOLE1BQUssU0FBQ3NOLEdBQ0w5QixFQUFRTyxRQUFRQyxFQUFXc0IsRUFBa0J2RCxHQUMvQyxJQUNDMkIsT0FBTSxTQUFDQyxHQUFHLE9BQUtDLFFBQVFDLElBQUksV0FBRC9MLE9BQVk2TCxHQUFNLElBQzVDa0IsU0FBUSxXQUNQSyxHQUFXUixjQUFhLEVBQzFCLEdBQ0osSUFHRnBDLEVBQWdCMUcsaUJBQWlCLFNBQVMsV0FDeENzSixHQUFXZixPQUNYekIsRUFBb0JvQyxrQkFDcEJwQyxFQUFvQmhCLGVBQ3RCLElBRUEsSUFBTXdDLEdBQW9CLElBQUlwRSxFQUFzQixDQUNsRHJDLGNBQWUscUJBQ2ZtQixpQkFBa0IsU0FBQ29CLEVBQUl2RSxHQUNyQnlJLEdBQWtCUSxjQUFhLEVBQU0saUJBQ3JDOUIsRUFDRzJDLGtCQUFrQnZGLEdBQ2xCaEksTUFBSyxXQUNKeUQsRUFBS0gsU0FDTEcsRUFBTyxLQUNQeUksR0FBa0J0RyxPQUNwQixJQUNDOEYsT0FBTSxTQUFDQyxHQUFHLE9BQUtDLFFBQVFDLElBQUksV0FBRC9MLE9BQVk2TCxHQUFNLElBQzVDa0IsU0FBUSxXQUNQWCxHQUFrQlEsY0FBYSxFQUNqQyxHQUNKLElBR0lOLEdBQWEsSUFBSXpFLEVBQWUsb0JBRXRDOEUsR0FBWWUsb0JBQ1pULEdBQWFTLG9CQUNicEIsR0FBV29CLG9CQUNYTixHQUFXTSxvQkFDWHRCLEdBQWtCc0IsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzQXBpKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHBvc3ROZXdDYXJkQXBpKG5hbWUsIGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mb0Zyb21BcGkoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hVc2VySW5mb1RvQXBpKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwYXRjaFVzZXJBdmF0YXJUb0FwaShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkRnJvbUFwaShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHV0Q2FyZExpa2VUb0FwaShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZExpa2VGcm9tQXBpKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7XHJcbiAgICBkYXRhLFxyXG4gICAgdXNlcklkLFxyXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcclxuICAgIGhhbmRsZUNsaWNrRGVsZXRlQnV0dG9uLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZURlbGV0ZSxcclxuICB9KSB7XHJcbiAgICB0aGlzLl9kYXRhQ2FyZCA9IGRhdGE7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VMaW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWRDYXJkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDbGlja0RlbGV0ZUJ1dHRvbiA9IGhhbmRsZUNsaWNrRGVsZXRlQnV0dG9uO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b25DbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VEZWxldGUgPSBoYW5kbGVMaWtlRGVsZXRlO1xyXG4gIH1cclxuXHJcbiAgX2dldEVsZW1lbnQoKSB7XHJcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlzdFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldEVsZW1lbnQoKTtcclxuICAgIHRoaXMuX2VsZW1lbnRDYXB0aW9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2NhcHRpb25cIik7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQ2FyZEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BvcHVwT3BlbkltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19idXR0b24taW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jb3VudGVyXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudENhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlTGluaztcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZC5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvdW50TGlrZXModGhpcy5fZGF0YUNhcmQpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uQ2xpY2soY2FyZCkge1xyXG4gICAgaWYgKHRoaXMuX2NoZWNrTGlrZXMoKSkge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlRGVsZXRlKGNhcmQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbihjYXJkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2sodGhpcy5faWRDYXJkKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BvcHVwT3BlbkltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5faW1hZ2VMaW5rKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uKHRoaXMuX2lkQ2FyZCwgdGhpcy5fZWxlbWVudClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tMaWtlcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcblxyXG4gIHN3aXRjaEJ1dHRvbkxpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQ2FyZEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgY291bnRMaWtlcyhkYXRhQ2FyZCkge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhQ2FyZC5saWtlcztcclxuICAgIGlmICh0aGlzLl9saWtlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIHNlbGVjdG9yQ2FyZCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JDYXJkKTtcclxuICB9XHJcbiAgXHJcbiAgcmVuZGVySXRlbXMoZGF0YSwgdXNlcikge1xyXG4gICAgZGF0YS5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSwgdXNlcikpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtSHRtbCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbUh0bWwpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX3VzZXJEYXRhID0ge307XHJcbiAgICB0aGlzLl91c2VyRGF0YS5uYW1lID0gdGhpcy5fbmFtZVNlbGVjdG9yLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fdXNlckRhdGEuYWJvdXQgPSB0aGlzLl9qb2JTZWxlY3Rvci50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGZvcm1EYXRhKSB7XHJcbiAgICBpZiAoZm9ybURhdGEubmFtZSkge1xyXG4gICAgICB0aGlzLl9uYW1lU2VsZWN0b3IudGV4dENvbnRlbnQgPSBmb3JtRGF0YT8ubmFtZTtcclxuICAgIH1cclxuICAgIGlmIChmb3JtRGF0YS5hYm91dCkge1xyXG4gICAgICB0aGlzLl9qb2JTZWxlY3Rvci50ZXh0Q29udGVudCA9IGZvcm1EYXRhPy5hYm91dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoZm9ybURhdGEpIHtcclxuICAgIGlmIChmb3JtRGF0YS5hdmF0YXIpIHtcclxuICAgICAgdGhpcy5fYXZhdGFyU2VsZWN0b3Iuc3JjID0gZm9ybURhdGE/LmF2YXRhcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQuY29kZSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVyTG9hZGVyKGxvYWRpbmcsIGRpc3BsYXlUZXh0KSB7XHJcbiAgICBpZiAobG9hZGluZykge1xyXG4gICAgICB0aGlzLmRlZmF1bFRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XHJcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IGRpc3BsYXlUZXh0O1xyXG4gICAgfSBcclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLmRlZmF1bFRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2hlYWRpbmcgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19oZWFkaW5nXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2hlYWRpbmcudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaWRDYXJkLCBjYXJkKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLmlkID0gaWRDYXJkO1xyXG4gICAgdGhpcy5jYXJkID0gY2FyZDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2J1dHRvblN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmlkLCB0aGlzLmNhcmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtLCBjb25maWcpIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50ID0gY29uZmlnLmlucHV0RWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dFZpc2libGVFcnJvciA9IGNvbmZpZy5pbnB1dFZpc2libGVFcnJvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dEVsZW1lbnQpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICB0aGlzLl9lcnJvclRleHRFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgJHt0aGlzLl9pbnB1dEVycm9yQ2xhc3N9JHtpbnB1dC5uYW1lfWBcclxuICAgICk7XHJcbiAgICB0aGlzLl9lcnJvclRleHRFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICB0aGlzLl9lcnJvclRleHRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0VmlzaWJsZUVycm9yKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgdGhpcy5fZXJyb3JUZXh0RWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCR7dGhpcy5faW5wdXRFcnJvckNsYXNzfSR7aW5wdXQubmFtZX1gXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZXJyb3JUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB0aGlzLl9lcnJvclRleHRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0VmlzaWJsZUVycm9yKTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0TGlzdCkuc29tZShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBpbnB1dEVsZW1lbnQ6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCIucG9wdXBfX2lucHV0LWVycm9yX3R5cGVfXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JcIixcclxuICBpbnB1dFZpc2libGVFcnJvcjogXCJwb3B1cF9faW5wdXRfdmlzaWJsZS1lcnJvclwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgZm9ybUVsZW1lbnRVc2VyID0gZG9jdW1lbnQuZm9ybXNbXCJwb3B1cF9mb3JtX3VzZXJcIl07XHJcbmNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5mb3Jtc1tcInBvcHVwX2Zvcm1fYXZhdGFyXCJdO1xyXG5jb25zdCBmb3JtUGxhY2UgPSBkb2N1bWVudC5mb3Jtc1tcInBvcHVwX2Zvcm1fcGxhY2VcIl07XHJcblxyXG5jb25zdCBidXR0b25FZGl0UHRvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGJ1dHRvbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRfYXZhdGFyXCIpO1xyXG5jb25zdCBidXR0b25FZGl0UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG5jb25zdCBwb3B1cE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtbmFtZVwiKTtcclxuY29uc3QgcG9wdXBKb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtYWJvdXRcIik7XHJcblxyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1BdmF0YXIsIGNvbmZpZyk7XHJcbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtUGxhY2UsIGNvbmZpZyk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50VXNlciwgY29uZmlnKTtcclxubGV0IHVzZXJOb3dJZDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02NVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZWZhZmRiN2UtZGM4Zi00YzdhLWFkODktNWFlOWI5OWRmOTkwXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmF2YXRhckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucGxhY2VGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvRnJvbUFwaSgpLCBhcGkuZ2V0SW5pdGlhbENhcmRzQXBpKCldKVxyXG4gIC50aGVuKChbcmVzcG9uc2VVc2VyLCByZXNwb25zZUNhcmRdKSA9PiB7XHJcbiAgICB1c2VyTm93SWQgPSByZXNwb25zZVVzZXIuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzcG9uc2VVc2VyKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzcG9uc2VVc2VyKTtcclxuICAgIHNlY3Rpb24ucmVuZGVySXRlbXMocmVzcG9uc2VDYXJkLCB1c2VyTm93SWQpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApKTtcclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGl0ZW1zLCB1c2VySWQpID0+IHtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKHJlbmRlckNhcmQoaXRlbXMsIHVzZXJJZCkpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmVsZW1lbnRcIlxyXG4pO1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhLCB1c2VyKSA9PiB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKHtcclxuICAgIGRhdGE6IGRhdGEsXHJcbiAgICB1c2VySWQ6IHVzZXIsXHJcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yOiBcIi5lbGVtZW50LXRlbXBsYXRlXCIsXHJcblxyXG4gICAgaGFuZGxlQ2xpY2tEZWxldGVCdXR0b246IChpZCwgY2FyZCkgPT4ge1xyXG4gICAgICBwb3B1cERlbGV0ZUFjY2VwdC5vcGVuKGlkLCBjYXJkKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZUxpa2VCdXR0b25DbGljazogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAucHV0Q2FyZExpa2VUb0FwaShjYXJkSWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC5jb3VudExpa2VzKHJlcyk7XHJcbiAgICAgICAgICBuZXdDYXJkLnN3aXRjaEJ1dHRvbkxpa2UocmVzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhbmRsZUxpa2VEZWxldGU6IChjYXJkSWQpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmRlbGV0ZUNhcmRMaWtlRnJvbUFwaShjYXJkSWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC5jb3VudExpa2VzKHJlcyk7XHJcbiAgICAgICAgICBuZXdDYXJkLnN3aXRjaEJ1dHRvbkxpa2UocmVzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIHJldHVybiBuZXdDYXJkLmNyZWF0ZUNhcmQoKTtcclxufTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fb2NjdXBhdGlvblwiLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlLWF2YXRhclwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBwb3B1cEF2YXRhci5yZW5kZXJMb2FkZXIodHJ1ZSwgXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiKTtcclxuICAgIGFwaVxyXG4gICAgICAucGF0Y2hVc2VyQXZhdGFyVG9BcGkoZGF0YSlcclxuICAgICAgLnRoZW4oKHJlc1VzZXIpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlc1VzZXIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCkpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cEF2YXRhci5yZW5kZXJMb2FkZXIoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRpb24uZGlzYWJsZUJ1dHRvbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlLXVzZXJcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcclxuICAgIHBvcHVwUHJvZmlsZS5yZW5kZXJMb2FkZXIodHJ1ZSwgXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiKTtcclxuICAgIGFwaVxyXG4gICAgICAucGF0Y2hVc2VySW5mb1RvQXBpKGZvcm1EYXRhKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCkpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFByb2ZpbGUucmVuZGVyTG9hZGVyKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5idXR0b25FZGl0UHRvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XHJcbiAgcG9wdXBOYW1lSW5wdXQudmFsdWUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpLm5hbWU7XHJcbiAgcG9wdXBKb2JJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuYWJvdXQ7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbi5kaXNhYmxlQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlLXBsYWNlXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XHJcbiAgICBwb3B1cFBsYWNlLnJlbmRlckxvYWRlcih0cnVlLCBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCIpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5wb3N0TmV3Q2FyZEFwaShmb3JtRGF0YS5pbWFnZU5hbWUsIGZvcm1EYXRhLmltYWdlTGluaylcclxuICAgICAgLnRoZW4oKG5ld0NhcmRGcm9tUG9wdXApID0+IHtcclxuICAgICAgICBzZWN0aW9uLmFkZEl0ZW0ocmVuZGVyQ2FyZChuZXdDYXJkRnJvbVBvcHVwLCB1c2VyTm93SWQpKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBQbGFjZS5yZW5kZXJMb2FkZXIoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmJ1dHRvbkVkaXRQbGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwUGxhY2Uub3BlbigpO1xyXG4gIHBsYWNlRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcGxhY2VGb3JtVmFsaWRhdGlvbi5kaXNhYmxlQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBEZWxldGVBY2NlcHQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlLWFjY2VwdFwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpZCwgY2FyZCkgPT4ge1xyXG4gICAgcG9wdXBEZWxldGVBY2NlcHQucmVuZGVyTG9hZGVyKHRydWUsIFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmRGcm9tQXBpKGlkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5yZW1vdmUoKTtcclxuICAgICAgICBjYXJkID0gbnVsbDtcclxuICAgICAgICBwb3B1cERlbGV0ZUFjY2VwdC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCkpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cERlbGV0ZUFjY2VwdC5yZW5kZXJMb2FkZXIoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZS16b29tXCIpO1xyXG5cclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cERlbGV0ZUFjY2VwdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iXSwibmFtZXMiOlsiQXBpIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJrZXkiLCJ2YWx1ZSIsImZldGNoIiwiY29uY2F0IiwibWV0aG9kIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJuYW1lIiwibGluayIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImFib3V0IiwiYXZhdGFyIiwiY2FyZElkIiwiQ2FyZCIsIl9yZWYiLCJ1c2VySWQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2xpY2tEZWxldGVCdXR0b24iLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJoYW5kbGVMaWtlRGVsZXRlIiwiX2RhdGFDYXJkIiwiX25hbWUiLCJfaW1hZ2VMaW5rIiwiX2lkQ2FyZCIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2xpY2tEZWxldGVCdXR0b24iLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlTGlrZURlbGV0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRFbGVtZW50IiwiX2VsZW1lbnRDYXB0aW9uIiwiX2VsZW1lbnRJbWFnZSIsIl9saWtlQ2FyZEJ1dHRvbiIsIl9idXR0b25EZWxldGVDYXJkIiwiX3BvcHVwT3BlbkltYWdlIiwiX2VsZW1lbnRMaWtlQ291bnRlciIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwicmVtb3ZlIiwiY291bnRMaWtlcyIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmQiLCJfY2hlY2tMaWtlcyIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfdGhpczIiLCJzb21lIiwiaXRlbSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImRhdGFDYXJkIiwibGVuZ3RoIiwiU2VjdGlvbiIsInNlbGVjdG9yQ2FyZCIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInVzZXIiLCJyZXZlcnNlIiwiZm9yRWFjaCIsIml0ZW1IdG1sIiwicHJlcGVuZCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJfYXZhdGFyU2VsZWN0b3IiLCJfdXNlckRhdGEiLCJmb3JtRGF0YSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImNvZGUiLCJjbG9zZSIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2J1dHRvblN1Ym1pdCIsImFkZCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJsb2FkaW5nIiwiZGlzcGxheVRleHQiLCJkZWZhdWxUZXh0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImNhbGwiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9oZWFkaW5nIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaWRDYXJkIiwiaWQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsImNvbmZpZyIsIl9pbnB1dEVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0VmlzaWJsZUVycm9yIiwiaW5wdXRWaXNpYmxlRXJyb3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJBcnJheSIsImZyb20iLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaGlkZUlucHV0RXJyb3IiLCJfZXJyb3JUZXh0RWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZGlzYWJsZWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVyIiwidXNlck5vd0lkIiwiZm9ybUVsZW1lbnRVc2VyIiwiZm9ybXMiLCJmb3JtQXZhdGFyIiwiZm9ybVBsYWNlIiwiYnV0dG9uRWRpdFB0b2ZpbGUiLCJidXR0b25FZGl0QXZhdGFyIiwiYnV0dG9uRWRpdFBsYWNlIiwicG9wdXBOYW1lSW5wdXQiLCJwb3B1cEpvYklucHV0IiwiYXZhdGFyRm9ybVZhbGlkYXRpb24iLCJwbGFjZUZvcm1WYWxpZGF0aW9uIiwicHJvZmlsZUZvcm1WYWxpZGF0aW9uIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJhbGwiLCJnZXRVc2VySW5mb0Zyb21BcGkiLCJnZXRJbml0aWFsQ2FyZHNBcGkiLCJfcmVmMiIsInJlc3BvbnNlVXNlciIsInJlc3BvbnNlQ2FyZCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwic2VjdGlvbiIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiaXRlbXMiLCJhZGRJdGVtIiwicmVuZGVyQ2FyZCIsIm5ld0NhcmQiLCJwb3B1cERlbGV0ZUFjY2VwdCIsIm9wZW4iLCJwb3B1cEltYWdlIiwicHV0Q2FyZExpa2VUb0FwaSIsInN3aXRjaEJ1dHRvbkxpa2UiLCJkZWxldGVDYXJkTGlrZUZyb21BcGkiLCJjcmVhdGVDYXJkIiwicG9wdXBBdmF0YXIiLCJyZW5kZXJMb2FkZXIiLCJwYXRjaFVzZXJBdmF0YXJUb0FwaSIsInJlc1VzZXIiLCJmaW5hbGx5IiwicmVzZXRWYWxpZGF0aW9uIiwicG9wdXBQcm9maWxlIiwicGF0Y2hVc2VySW5mb1RvQXBpIiwiZ2V0VXNlckluZm8iLCJwb3B1cFBsYWNlIiwicG9zdE5ld0NhcmRBcGkiLCJpbWFnZU5hbWUiLCJpbWFnZUxpbmsiLCJuZXdDYXJkRnJvbVBvcHVwIiwiZGVsZXRlQ2FyZEZyb21BcGkiLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=